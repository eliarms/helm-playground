apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: nginx
  namespace: argocd
  finalizers:
    - resources-finalizer.argocd.argoproj.io
spec:
  destination:
    server: https://kubernetes.default.svc
    namespace: default
  project: default
  source:
    chart: ingress-nginx/ingress-nginx
    helm:
      values: |
        service:
            enabled: true

            labels: {}
            # clusterIP: ""

            ## List of IP addresses at which the controller services are available
            ## Ref: https://kubernetes.io/docs/user-guide/services/#external-ips
            ##
            externalIPs: []

            # loadBalancerIP: ""
            loadBalancerSourceRanges: []

            enableHttp: true
            enableHttps: true

            ## Set external traffic policy to: "Local" to preserve source IP on
            ## providers supporting it
            ## Ref: https://kubernetes.io/docs/tutorials/services/source-ip/#source-ip-for-services-with-typeloadbalancer
            # externalTrafficPolicy: ""

            # Must be either "None" or "ClientIP" if set. Kubernetes will default to "None".
            # Ref: https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies
            # sessionAffinity: ""

            # specifies the health check node port (numeric port number) for the service. If healthCheckNodePort isn’t specified,
            # the service controller allocates a port from your cluster’s NodePort range.
            # Ref: https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/#preserving-the-client-source-ip
            # healthCheckNodePort: 0

            ports:
              http: 80
              https: 443

            targetPorts:
              http: http
              https: https

            type: LoadBalancer

            # type: NodePort
            # nodePorts:
            #   http: 32080
            #   https: 32443
            #   tcp:
            #     8080: 32808
            nodePorts:
              http: ""
              https: ""
              tcp: {}
              udp: {}

    repoURL: https://kubernetes.github.io/ingress-nginx
    targetRevision: 3.30.0
  syncPolicy:
    automated:
      prune: true
      selfHeal: true